<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Thermostat</title>
</head>

<body style="text-align: center">
  <link rel="stylesheet" href="style.css">
  <script src="src/Thermostat.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
  <h1 id="temperature">Temperature: </h1>
  <div id='button'>
    <button id="plus_button" type="button">Temperature up</button>
    <button id="minus_button" type="button">Temperature down</button>
  </div>
  <br>
  <br>
  <div class="PSMswitch">
    <input type="checkbox" name="PSMswitch" class="PSMswitch-checkbox" id="myPSMswitch" checked>
    <label class="PSMswitch-label" for="myPSMswitch">
        <span class="PSMswitch-inner"></span>
        <span class="PSMswitch-switch"></span>
    </label>
  </div>
  <br>
  <button id="resetButton" type="button">Reset Button</button>
  <div class="container">
    <div class="progressbar"></div>
  </div>
</body>
<script>
  var thermostat = new Thermostat()
  $(document).ready(function() {

    $("#temperature").text('Temperature: ' + thermostat.temperature)
    setProgress(thermostat.temperature/32)

    $("#minus_button").click(function() {
      thermostat.down()
      $("#temperature").text('Temperature: ' + thermostat.temperature)
      setProgress(thermostat.temperature/32)
      $(this).effect("pulsate", {
        times: 0
      }, 50);
    });

    $("#plus_button").click(function() {
      thermostat.up()
      $("#temperature").text('Temperature: ' + thermostat.temperature)
      setProgress(thermostat.temperature/32)
      $(this).effect("pulsate", {
        times: 0
      }, 50);
    });

    $("#resetButton").click(function(){
      thermostat.resetTemperature();
    })
    $("#myPSMswitch").change(function(){
      thermostat.powerSavingSwitch();
      $('#temperature').text('Temperature: ' + thermostat.temperature)
      setProgress(thermostat.temperature/32)
    })

    function setProgress(progress) {
      var progressBarWidth = progress * $(".container").width();
      $(".progressbar").width(progressBarWidth);
    }
  })
</script>

</html>
